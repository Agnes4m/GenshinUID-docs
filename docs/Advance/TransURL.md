# 本地图转网络地址发送<Badge type="warning" text="普通" />

::: tip

在QQGroup（或之后的其他平台）的适配中，该平台并不支持本地图发送（即直接传入Base64）

这时候需要将本地图转为网络图发送

GsCore提供两种方式进行转换

:::

## 一、通过带有公网IP的服务器自动转为Web图片

如果你的GsCore部署于带有公网IP的服务器下，那么首选该方法。

#### 通过修改文件进行配置

1. 修改`core_config.json`（该文件位于`gsuid_core/data`下）文件
   1. `["EnablePicSrv"]["data"]`为`true`
   2. `["PicSrv"]["data"]`为`http://IP:8765`
      1. 链接中的IP需要修改为你服务器的公网IP，并放行8765端口

2. 重启GsCore

#### 通过网页控制台进行配置

1. 进入[网页控制台](./WebConsole)，找到左侧【修改设定】，点击进入
2. 在第一块配置块`Core`下，找到`将图片转链接发送(需公网)`的两个配置
3. 一个开关打开，另一个填入"http://IP:8765",链接中的IP需要修改为你服务器的公网IP，并放行8765端口
4. 点击确认修改，重启GsCore

## 二、通过图床或对象存储服务自动转为Web图片

如果你部署GsCore的服务器不存在公网，或者不想暴露端口，或服务器上行速度过慢（当然再慢应该也比图床服务快），则选择该方法。

::: tip

该方法提供了`sm.ms`图床和`s3对象存储`的两种调用方式

有关配置方法不具体细聊，后者大多情况是付费的，而[sm.ms](https://sm.ms/)的服务是免费的，可以首选smms

**以下以`smms`为示例进行配置**

:::

#### 通过修改文件进行配置

1. 修改`pic_upload_config`（该文件位于`gsuid_core/data`下）
   1. `["PicUpload"]["data"]`为`true`
   2. `["PicUploadServer"]["data"]`为`smms`
   3. `["smms_token"]["data"]`为你网页申请到的token

2. 重启GsCore

#### 通过网页控制台进行配置

1. 进入[网页控制台](./WebConsole)，找到左侧【修改设定】，点击进入
2. 在`GsCore图片上传`配置块下
   1. 打开`自动上传图片`的开关
   2. `上传图片方式`的方式输入`smms`
   3. `sm.ms_token`中输入sm.ms网页申请到的token
3. 点击确认修改，重启GsCore

## Extra、自定义不同场景的不同发送形式

你可以通过修改`send_pic_config`（该文件位于`gsuid_core/data`下）的配置，来自定义不同平台发送图片的方式。

打开该文件（或者使用[网页控制台](./WebConsole)）查看其配置，会发现默认状态下`qqgroup`的配置项中，默认发送方式为`link`，而其他平台均为`base64`。

如果你希望无视上面两种配置开关，自动使用图床或者本地图床或者本地图方式，可以修改配置

- `base64`：本地图发送方式
- `link_remote`：网络图床发送方式，`smms`或`s3`
- `link_local`：本地图床发送方式，需要服务器有公网IP
- `link`：自动选择图床发送方式，在配置了本地图床的情况下，优先使用本地图床

