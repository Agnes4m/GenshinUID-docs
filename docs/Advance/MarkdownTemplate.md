# MD模板和按钮模板<Badge type="tip" text="简单" />

::: warning

该篇文章仅适用于`QQ群/频道官方机器人`平台，即`bot_id`为`qqgroup`和`qqguild`。

其他平台发送按钮和MD相关消息，无需模板，仅需要配置`data/core_config.json`中的`SendButtonsPlatform`和`SendMDPlatform`为对应平台的bot_id即可。

:::

## 简单流程概述

1. 用户主动填写自己拥有的**MD模板和按钮模板**
2. 用户配置`data/core_config.json`中的【尝试读取模板文件并发送】（`TryTemplateForQQ`）为开
   - 该开关默认为开，如不是特意调整，无需手动配置

以上两步之后，用户**配置完成**，以下为GsCore**自动处理的过程**

1. GsCore发送消息时确认`TryTemplateForQQ`开关为开
2. 自动读取目录下的模板文件进行消息匹配
3. 如果发现匹配的MD模板，则**自动**转换为模板MD消息
4. 如果发现匹配的按钮模板，则发送模板MD+按钮模板消息
5. 如果都没匹配到，则正常发送消息

## 主动填写模板

::: tip
为了方便Core插件的**多平台适配**

GsCore可以通过用户**主动填写**拥有的MD模板和按钮模板

来对Core**即将发送**的消息**进行解析**

如果Core即将发送的信息**可以匹配**某个MD模板

则会**自动调用**该模板!
:::

1. 申请MD模板和按钮模板
2. 进入该路径`gsuid_core/data/template`，下文简称`模板路径`
3. 进入`模板路径/markdown`中
   1. 创建一个或多个**名字**是【MD模板ID】，**内容**是【你的模板】的【**txt文件**】

4. 填入按钮模板ID（以下二选一）

   1. 进入`模板路径/custom_buttons`中（该路线会检查调用命令，命令匹配即自动发送该按钮模板）

      1. 创建一个或多个**名字**是【你希望带按钮的命令】，**内容**是【你的ID】的【**json文件**】

      2. ```json
         {
           "id": "102072861_1702110272"
         }
         ```

   2. 进入`模板路径/buttons`中（该路线会自动分析按钮模板，core发送消息匹配即可带上）

      1. 创建一个或多个**名字**是【按钮模板ID】，**内容**是【你的模板】的【**json文件**】

## 参考图片
1. MD模板
![image-20231217045602155](./../public/MarkdownTemplate/image-20231217045602155.png)
2. 按钮模板（路线1）
![image-20231217045705481](./../public/MarkdownTemplate/image-20231217045705481.png)
3. 按钮模板（路线2）
![image-20231217045637291](./../public/MarkdownTemplate/image-20231217045637291.png)